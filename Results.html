<html lang="en">
<head>


   	<title>MAP EXAMPLE</title>
	
   	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin="">
   		
   	var mymap =null;      	
   	</script>
	<style type="text/css">
	
	</style>

    <meta charset="UTF-8">
    <title>Contact Us</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather" />
</head>
<body>
<nav>
    <a href="FrontPage.html" id="logo"><img src="pics/logo-sided-inverted.png" height="30"></a>
    <a href="FrontPage.html">Home</a>
    <a href="Review.html">Review</a>
    <a href="MyAccount.html">My account</a>
    <a href="Search.html">Search</a>
    <button><a href="Signup.html">Sign up</a></button>
    <button><a href="Login.html">Log in</a></button>
</nav>
<main>

<div class="row">
  <div class="column">
    <h2>Reviews</h2>
    Review 1</br>
	Review 2</br>
	Review 3</br>
	Review 4</br>
	Review 5</br>
  </div>
  <div class="column">
    <h2>Map of results</h2>
	<div id="mapid" style="width: 100%; height: 600px;"></div>    
  </div>
</div>

<footer>
    <table>
        <tr>
            <td>By Happy Web Programming team(No. 19)</td>
        </tr>
        <tr>
		    <td><a href="ContactUs.html">Contact us</a></td>
            <td><a href="Contact_us.html">Contact us</a></td>
        </tr>
    </table>
</footer>

<script type="text/javascript">
		
		//Initialize Map	
		var ConcordiaLat = 45.495675;
   		var ConcordiaLong = -73.578667;
		
		//mapid is the id for your div element
		//You can leave the rest as it is
		mymap = L.map('mapid').setView([ConcordiaLat, ConcordiaLong], 14.5);			
    	L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
		maxZoom: 18,
		attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
			'<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
			'Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
		id: 'mapbox/streets-v11',
		tileSize: 512,
		zoomOffset: -1
	}).addTo(mymap);
	
	
	//var latlng = L.latLng(ConcordiaLat, ConcordiaLong);
	//var circle = L.circle(latlng, {color: 'red',fillColor: '#f03', fillOpacity: 0.5,  radius: 1000}).addTo(mymap);
	

    //CODE TO CHANGE ADDRESS TO LATLONG
    //https://www.w3schools.com/js/js_ajax_http_response.asp
    //https://wiki.openstreetmap.org/wiki/FR:Nominatim
    //There is also the reverse search from lat long to address
   	function addr_search()
	{
	   	var addr = document.getElementById("adress").value;

	   	var xmlhttp = new XMLHttpRequest();
		var url = "https://nominatim.openstreetmap.org/search?format=json&q=" + addr;
		xmlhttp.onreadystatechange = function()
		{console.log(this);
		
			if (this.readyState == 4 && this.status == 200)
			{
			    var myArr = JSON.parse(this.responseText);
				var lat0=myArr[0].lat;
				var lon0=myArr[0].lon;
				var lat1=ConcordiaLat;
				var lon1=ConcordiaLong;
			    //myArr is an array of the matching addresses 
			    //You can extract the lat long attributes
			    //myArr[0].lat and myArr[0].lon;

				/*
				var latlon = L.latLng(myArr[0].lat, myArr[0].lon);
				document.getElementById("lat").value = myArr[0].lat;
				document.getElementById("lon").value = myArr[0].lon;
				L.circleMarker(latlon, {color: 'blue',fillColor: '#f03', fillOpacity: 0.5, radius: 10}).addTo(mymap);
				

			    //Use Polyline to draw line on map
			    //https://leafletjs.com/reference-1.7.1.html
				
				
				var latlngs=[[lat0, lon0],[lat1, lon1]];
				var polyline = L.polyline(latlngs, {color: 'green'}).addTo(mymap);
				mymap.fitBounds(polyline.getBounds());
				
				
			    //Compute Distance using
				const distance = document.getElementById('dist');
			    var dista=(latlng.distanceTo(latlon)).toFixed(0)/1000;
				//var dist=L.distanceTo(latlon,latlng)/1000;
				console.log(dista);
				distance.textContent="The location is "+dista+"km away from Concordia";
				*/
		 	}
		};
		xmlhttp.open("GET", url, true);
		xmlhttp.send();

	}
</script>




</body>
</html>